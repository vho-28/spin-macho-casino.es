(()=>{document.addEventListener("DOMContentLoaded",()=>{let o=document.querySelector(".mobile-menu-toggle"),i=document.body,s=document.querySelector(".main-navigation"),m=1024;o&&s&&o.addEventListener("click",e=>{e.stopPropagation();let t=i.classList.toggle("is-mobile-menu-open");o.classList.toggle("is-active"),o.setAttribute("aria-expanded",t?"true":"false"),i.style.overflow=t?"hidden":"",t||l(s)}),(s?s.querySelectorAll(".menu-item.has-children"):[]).forEach(e=>{let t=e.querySelector(":scope > a");t&&t.addEventListener("click",function(c){let n=window.innerWidth<=m,u=t.getAttribute("href")==="#";(u||n&&!e.classList.contains("submenu-open")&&!u)&&c.preventDefault(),n&&(e.classList.contains("submenu-open")||d(e),e.classList.toggle("submenu-open")),c.stopPropagation()})}),document.addEventListener("click",e=>{if(i.classList.contains("is-mobile-menu-open")){let n=s.contains(e.target),a=o.contains(e.target);!n&&!a&&(i.classList.remove("is-mobile-menu-open"),o.classList.remove("is-active"),o.setAttribute("aria-expanded","false"),i.style.overflow="",l(s))}let t=s?s.querySelectorAll(".menu-item.has-children.submenu-open"):[],c=!1;t.forEach(n=>{n.contains(e.target)&&(c=!0)}),c||l(s)}),document.addEventListener("keydown",e=>{e.key==="Escape"&&(i.classList.contains("is-mobile-menu-open")&&(i.classList.remove("is-mobile-menu-open"),o.classList.remove("is-active"),o.setAttribute("aria-expanded","false"),i.style.overflow=""),l(s))});function l(e){e&&e.querySelectorAll(".menu-item.has-children.submenu-open").forEach(t=>{t.classList.remove("submenu-open")})}function d(e){let t=e.closest("ul");t&&t.querySelectorAll(":scope > .menu-item.has-children.submenu-open").forEach(n=>{n!==e&&n.classList.remove("submenu-open")})}let f=document.querySelectorAll(".play-button"),r="https://27d75jeosf.top/RC2TZM";r||console.warn("Referral URL (site.Params.referralBaseUrl) is empty in Hugo config. Play buttons might not redirect correctly."),f.forEach(e=>{e.getAttribute("href")==="/play"&&e.addEventListener("click",function(t){t.preventDefault(),r&&window.open(r,"_blank")})}),document.querySelectorAll(".toc-container").forEach(e=>{let t=e.querySelector(".toc-toggle-button"),c=e.querySelector(".toc-content-wrapper");t&&c&&t.addEventListener("click",()=>{let n=e.classList.toggle("is-open");t.setAttribute("aria-expanded",n?"true":"false"),n&&setTimeout(()=>{e.getBoundingClientRect().top<0&&e.scrollIntoView({behavior:"smooth",block:"start"})},360)})})});})();
